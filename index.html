<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>싯카드 자동배정</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <div class="container">
        <h1>싯카드 자동배정</h1>

        <div class="setup-section">
            <div class="nickname-input">
                <h2>1. 닉네임 입력</h2>
                <textarea id="nicknames" placeholder="한 줄에 한 명씩 닉네임을 입력하세요..."></textarea>
                <p>총 <span id="player-count">0</span>명</p>
            </div>

            <div class="options-input">
                <h2>2. 옵션 선택</h2>
                <fieldset>
                    <legend>테이블 선택</legend>
                    <div class="option-group">
                        <label><input type="radio" name="table-option" value="1_table" checked> 1 테이블</label>
                        <label><input type="radio" name="table-option" value="2_table"> 2 테이블</label>
                    </div>
                </fieldset>
                <hr>
                <fieldset>
                    <legend>딜러 선택</legend>
                    <div class="option-group">
                        <label><input type="radio" id="dealer-needed" name="dealer-option" value="needed" checked> 딜러 필요</label>
                        <label><input type="radio" id="dealer-not-needed" name="dealer-option" value="not-needed"> 딜러 불필요</label>
                    </div>
                </fieldset>
                <fieldset id="dealer-fix-fieldset">
                    <legend>딜러 고정</legend>
                    <div class="dealer-fix-group dealer-a-group">
                        <label for="dealer-a-select">딜A</label>
                        <select id="dealer-a-select"></select>
                        <button id="dealer-a-direct-btn" class="direct-input-btn">직접입력</button>
                    </div>
                    <div id="dealer-b-group" class="dealer-fix-group">
                        <label for="dealer-b-select">딜B</label>
                        <select id="dealer-b-select"></select>
                        <button id="dealer-b-direct-btn" class="direct-input-btn">직접입력</button>
                    </div>
                </fieldset>
            </div>
        </div>

        <div class="button-container">
            <button id="assign-button">✨ 싯카드 배정하기</button>
        </div>
        
        <div id="sitcard-display" class="sitcard-display"></div>

        <div class="action-buttons">
            <button id="add-player-button" class="action-btn">🙋‍♂️ 추가 배치</button>
            <button id="save-button" class="action-btn">💾 저장</button>
            <button id="lock-button" class="action-btn">🔒 잠금</button>
            <button id="image-save-button" class="action-btn">📸 이미지 저장</button>
            <button id="load-history-button" class="action-btn">📂 저장내역</button>
            <button id="new-game-button" class="action-btn">✨ 새로운 게임</button>
        </div>
    </div>

    <div id="add-player-popup" class="popup-container" style="display: none;">
        <div class="popup-content">
            <h2>추가 인원 닉네임</h2>
            <textarea id="new-nicknames-input" placeholder="한 줄에 한 명씩 닉네임을 입력하세요..."></textarea>
            <div class="popup-buttons">
                <button id="confirm-add-button" class="confirm-btn">+ 추가하기</button>
                <button id="cancel-add-button" class="cancel-btn">취소</button>
            </div>
        </div>
    </div>
    <div id="save-confirm-popup" class="popup-container" style="display: none;">
        <div class="popup-content">
            <h2>내역을 저장하시겠습니까?</h2>
            <p id="save-timestamp"></p>
            <div class="popup-buttons">
                <button id="confirm-save-button" class="confirm-btn">확인</button>
                <button id="cancel-save-button" class="cancel-btn">취소</button>
            </div>
        </div>
    </div>
    <div id="capacity-popup" class="popup-container" style="display: none;">
        <div class="popup-content">
            <h2>인원 초과입니다.</h2>
            <p>2테이블로 진행하세요.</p>
            <div class="popup-buttons">
                <button id="confirm-capacity-button" class="confirm-btn">확인</button>
            </div>
        </div>
    </div>
    <div id="history-popup" class="popup-container" style="display: none;">
        <div class="popup-content">
            <h2>저장 내역 불러오기</h2>
            <div id="history-list" class="history-list"></div>
            <div class="popup-buttons">
                <button id="close-history-button" class="cancel-btn">닫기</button>
            </div>
        </div>
    </div>
    <div id="new-game-popup" class="popup-container" style="display: none;">
        <div class="popup-content">
            <h2>새 게임을 시작하시겠습니까?</h2>
            <p>닉네임 목록을 포함한 모든 현재 내역이 초기화됩니다.</p>
            <div class="popup-buttons">
                <button id="confirm-new-game-button" class="confirm-btn">확인</button>
                <button id="cancel-new-game-button" class="cancel-btn">취소</button>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    
    <script src="js/firebase-config.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/main.js"></script>
</body>
</html>